+++
date = "2015-03-19T14:43:10+02:00"
title = "الجزء الثاني - نظام الملفات"

+++

تلتزم توزيعات لينكس بطريقة موحدة لتنظيم وتوزيع ملفات ومجلدات النظام، وذلك حسب معيار **FHS** (أي *File Hierarchy Standard*) الذي وضعته مؤسسة لينكس (*[Linux Foundation](http://linuxfoundation.org)*). يحدد هذا المعيار أسماء المجلدات الأساسية في النظام، ودور كل واحد منها.

في هذا الجزء سنتحدث عن أهم المجلدات ودورها في النظام، بالإضافة لتغطية بعض خصائص نظام الملفات في لينكس.
<!--more-->

## جذر نظام الملفات

ترتب الملفات في لينكس ضمن مجلدات، والمجلدات يمكن أن توضع هي أيضاً ضمن مجلدات أخرى، وبذلك يبدو نظام الملفات منظماً بشكل شجرة.


للشجرة نقطة بداية وحيدة في أعلاها، تدعى *’’الجذر‘‘*. يحوي جذر نظام الملفات مجموعة من المجلدات الأساسية لنظام التشغيل، تحوي المكتبات والبرامج الضرورية لعمل النظام، بالإضافة إلى ملفات إعدادات النظام وغيرها.

في لينكس، لا يوجد سوى شجرة ملفات واحدة فقط، وهذه الشجرة تُخزَّن على القرص الذي تم تثبيت النظام عليه. كيف نصل إذاً إلى الأقراص الأخرى؟ هذا يكون عبر *ربط* (بالإنكليزية *mount*) القرص أو القسم (*partition*) مع شجرة الملفات الأساسية.

لنقل أن لدينا قرصين صلبين في الجهاز، ولنفرض أن نظام لينكس مُثبَّت على القرص الأول، إذاً جذر نظام الملفات (ويرمز له `/`) يكون مرتبط مع هذا القرص. كل الملفات والمجلدات التي تخزن على هذا القرص ستظهر ضمن المجلد `/` (يدعى root أو الجذر ولكن يكتب `/`).

لا بد أن يكون القرص الذي يحوي ملفات `/` متوفراً أثناء الإقلاع وإلا فلا يمكن إقلاع النظام (طبعاً لا يشترط أن يكون متوفراً على قرص صلب، بل يمكن أن يوضع على CD أو ذاكرة USB).

الآن كيف نصل إلى القرص الثاني؟ وأين يمكننا رؤية الملفات والمجلدات المخزنة فيه؟ سنحتاج إلى ربطه مع الشجرة الأساسية كما سنرى في الفقرة التالية.

## عملية الربط Mounting

كلما أردنا الوصول إلى محتويات قرص أو قسم غير القسم الذي يحوي جذر شجرة الملفات، علينا *’’ربطه‘‘* *mount* كما يلي:

1. ننشئ مجلداً جديداً (ضمن شجرة المجلدات الحالية).

2. نربط هذا المجلد مع القرص الثاني (سنتحدث عن تفاصيل تنفيذ هذه العملية لاحقاً).

الآن عندما ندخل على المجلد الجديد الذي أنشأناه سوف ينقلنا إلى محتويات القرص الثاني. لم يعد هذا المجلد مجلداً عادياً بل تحول إلى *’’نقطة ربط‘‘* أو *mount point*. 

![](/linuxfun/post/linux_p2/mounting.png)

يمكنك تخيل نقطة الربط وكأنها بوابة تنقلك من قرص إلى قرص آخر، دون أن تشعر! فنقطة الربط بدأت كمجلد عادي وتعمل كأنها مجلد عادي. لا يوجد أي اختلاف من وجهة نظر نظام التشغيل أو التطبيقات التي تعمل مع نظام الملفات؛ الاختلاف الوحيد هو أنك إذا أنشأت ملفات جديدة فسوف تُخزَّن &ndash; فيزيائياً &ndash; على القرص الثاني وليس الأول.

لا يوجد طريقة أخرى للتعامل مع الأقراص الإضافية في نظام التشغيل: فعند توصيل ذاكرة USB أو قرص خارجي مع الجهاز ستحتاج لربطه والدخول غلى محتوياته بهذه الطريقة، وكذلك إذا أدخلت قرصاً ليزرياً، بل حتى الأقراص المشتركة عبر الشبكة يصل إليها لينكس بالأسلوب ذاته.

لتسهيل العملية على المستخدم غالباً يتم ربط الأجهزة التخزينية القابلة للإزالة (الأقراص الليزرية، ذواكر USB والأقراص الخارجية) بطريقة آلية، أو يظهر للمستخدم مدخلة خاصة في مدير الملفات تسمح له بالدخول مباشرة إلى محتويات الأقراص الخارجية (الفكرة هي أن النقر على هذه المدخلة يؤدي لربط الجهاز التخزيني وفتح المجلد الذي ربط معه تلقائياً).

## مجلدات النظام

![](/linuxfun/post/linux_p2/file-sys-hier.png)

كما ذكرنا، ملفات ومجلدات النظام تُخزّن في `/`، ومن أهم المجلدات التي نجدها فيه هي:

+  **`/bin`**: يحوي الملفات التنفيذية (Binaries) لتطبيقات وبرامج ضرورية للنظام ولا يمكن الاستغناء عنها.

+  **`/lib`**: مكتبات أساسية للنظام.

+  **`/boot`**: يحوي نواة النظام، ومدير الإقلاع، وإعدادات الإقلاع وبعض الملفات الأخرى اللازمة لعملية إقلاع النظام.

+  <strong>`/etc`</strong>: تخزن فيه إعدادات النظام. في لينكس، معظم إعدادات البرامج وإعدادات النظام نفسها توضع في مجلد `/etc` بشكل ملفات نصية، يمكن فتحها وتحريرها باستخدام أي محرر نصوص.

+  <strong>`/home`</strong>: مجلد المنزل أو البيت. يستخدم هذا المجلد لتخزين ملفات المستخدمين، وإعداداتهم، وأيضاً يمكن تثبيت برامج خاصة بالمستخدم ضمنه. لا يخزن المستخدمون ملفاتهم مباشرة في مجلد `/home`، بل يملك كل مستخدم مجلداً خاصاً به ضمن `/home` يسمى بنفس اسم المستخدم؛ مثلاً `/home/muhammad` هو المجلد الخاص بالمستخدم `muhammad`، وفيه يضع ملفاته. أما `/home/saied` فهو مجلد المستخدم `saied`. 

    لا يحق للمستخدم إنشاء الملفات والمجلدات عشوائياً في أي مكان في نظام الملفات، بل فقط في أماكن محددة: أهمها مجلد المنزل الخاص بالمستخدم، وأيضاً مجلد `/tmp` الذي يخزن فيه جميع المستخدمون ملفاتهم المؤقتة.

+  <strong>`/usr`</strong>: 
يستخدم لتثبيت البرامج والتطبيقات الخدمية التي تفيد المستخدمين ولكنها ليست أساسية للنظام نفسه، ستجد بداخله أيضاً مجلدات `/usr/bin` للملفات التنفيذية، و `/usr/lib` للمكتبات، و `/usr/share` الذي يحوي ملفات المساعدة وأمثلة عن استخدام البرامج، ويحوي أيضاً أشياء أخرى مثل مجلد الخطوط `/usr/share/fonts` (تُخزَّن فيه الخطوط المتوفرة على النظام، وهو يقابل `C:\Windows\Fonts\` على نظام ويندوز).

+  <strong>`/root`</strong>: مجلد البيت للمستخدم `root`. في نظام لينكس هناك مستخدم وحيد اسمه `root` وهو يملك صلاحيات كاملة على النظام: حيث يمكنه قراءة أي ملف والتعديل عليه أو حذفه، كما يحق له إضافة مستخدمين جدد أو حذف القدامى أو التعديل عليهم: مثل منحهم صلاحيات أعلى أو سحب صلاحيات قديمة، كما يمكنه تغيير كلمة السر لأي مستخدم دون معرفة الكلمة القديمة... وأي شيء آخر يمكن أن تفكر به.

    سنعود للحديث عن المستخدم `root` لاحقاً عند الحديث عن إدارة المستخدمين في لينكس.
    
#### ملحوظة مهمة

أسماء الملفات *حساسة لحالة الأحرف*. المجلد `/boot` مختلف عن المجلد `/Boot` ومختلف عن المجلد `/BOOT`. انتبه لهذه النقطة خصوصاً عند استخدام سطر الأوامر.


## المسار النسبي والمسار المطلق

عندما تريد الإشارة لموقع ملف أو مجلد ما في نظام الملفات فهناك أسلوبين لكتابة المسار:

```
/home/muhammad/Desktop/myfile.txt
```

المسار السابق يشير للملف `myfile.txt` الموجود ضمن مجلد سطح المكتب `Desktop` للمستخدم `muhammad`. يدعى هذا المسار بالمسار المطلق (Absolute Path)، لأنه يشير دائماً إلى الموقع نفسه. لاحظ أن المسار يبدأ بعلامة `/` التي تشير إلى جذر نظام الملفات، وبعدها تذكر المجلدات التي يجب أن نمر خلالها حتى الوصول إلى الملف المطلوب.

أما المسار التالي:

```
../Desktop/myfile.txt
```

لاحظ أن بداية المسار هي العلامة (`..`) وهي تمثل المجلد الأب للمجلد الحالي. فإذا كان المستخدم حالياً ضمن المجلد `/home/muhammad/Desktop` فهذا يعني أن `..` تمثل `/home/muhammad`. وإذا كان المستخدم ضمن المجلد `/home` عند ذلك تشير `..` إلى المجلد `/`.

هذا النوع من المسارات يدعى المسار النسبي (Relative Path)، لماذا؟ لأن الموقع الذي يشير إليه يتغير حسب الموقع الحالي للمستخدم:

مثلاً المستخدم موجود في المجلد التالي:

<pre>
<strong>/home/muhammad</strong>/Documents/
</pre>

عندئذ سوف يشير المسار النسبي السابق إلى المسار التالي:

<pre>
<strong>/home/muhammad</strong>/Desktop/myfile.txt
</pre>

لاحظ كيف استبدلنا `..` في المسار النسبي بالمجلد الأب للمسار الذي يوجد به المستخدم حالياً.

![](/linuxfun/post/linux_p2/relative-path.png)

لنفرض أن المسار الحالي للمستخدم هو:

<pre>
<strong>/home/saied</strong>/Desktop/
</pre>

المسار الغليظ يمثل مسار المجلد الأب للموقع الحالي للمستخدم. الآن لو استخدمنا المسار النسبي السابق إلى أين سوف يؤدي بنا؟

<pre>
<strong>..</strong>/Desktop/myfile.txt <strong>-></strong> <strong>/home/saied</strong>/Desktop/myfile.txt
</pre>

كما ذكرنا المسار المطلق يبدأ بعلامة `/` التي تدل على جذر نظام الملفات، أما المسارات النسبية فهناك عدة علامات يمكن أن تبدأ بها:

+   `..`: تشير للمجلد الأب للموقع الحالي للمستخدم.

+  `.`: تشير للمجلد الحالي نفسه. أحياناً تكون كتابتها إلزامية وأحياناً يمكن إهمالها، مثلاً:

    ```
    ./Desktop/myfile.txt
    /Desktop/myfile.txt
    Desktop/myfile.txt
    ```
    
    كلها تؤدي إلى نفس الموقع. لاحظ أن المسار الثاني يتشابه مع المسارات المطلقة.
    
+  <strong>`~`</strong>: تدل على مجلد البيت للمستخدم الحالي، مثلاً إذا كان اسم المستخدم الحالي `muhammad` عند ذلك تشير `~` إلى المجلد `/home/muhammad`. يمكن استخدامها مع اسم مستخدم آخر للإشارة إلى مجلد البيت الخاص به، مثلاً المسار `~saied` يشير إلى `/home/saied` مهما كان اسم المستخدم الذي يستخدم الحاسوب حالياً.

